diff --git a/AmbaConfig b/AmbaConfig
index d5719b3..5cf8917 100644
--- a/AmbaConfig
+++ b/AmbaConfig
@@ -1,14 +1,32 @@
 ##
-## amboot/image/AmbaConfig
+## AmbaConfig
+##
 ## History:
 ##    2008/02/21 - [Anthony Ginger] Create
 ##
-## Copyright (C) 2004-2008, Ambarella, Inc.
+## Copyright (c) 2016 Ambarella, Inc.
+##
+## This file and its contents ("Software") are protected by intellectual
+## property rights including, without limitation, U.S. and/or foreign
+## copyrights. This Software is also the confidential and proprietary
+## information of Ambarella, Inc. and its licensors. You may not use, reproduce,
+## disclose, distribute, modify, or otherwise prepare derivative works of this
+## Software or any portion thereof except pursuant to a signed license agreement
+## or nondisclosure agreement with Ambarella, Inc. or its authorized affiliates.
+## In the absence of such an agreement, you agree to promptly notify and return
+## this Software to Ambarella, Inc.
 ##
-## All rights reserved. No Part of this file may be reproduced, stored
-## in a retrieval system, or transmitted, in any form, or by any means,
-## electronic, mechanical, photocopying, recording, or otherwise,
-## without the prior consent of Ambarella, Inc.
+## THIS SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,
+## INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF NON-INFRINGEMENT,
+## MERCHANTABILITY, AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
+## IN NO EVENT SHALL AMBARELLA, INC. OR ITS AFFILIATES BE LIABLE FOR ANY DIRECT,
+## INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
+## (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
+## LOSS OF USE, DATA, OR PROFITS; COMPUTER FAILURE OR MALFUNCTION; OR BUSINESS
+## INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
+## CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
+## ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
+## POSSIBILITY OF SUCH DAMAGE.
 ##
 
 menuconfig CONFIG_AMBARELLA_MKFS
@@ -193,7 +211,48 @@ config CONFIG_AMBARELLA_COMPRESS_RAMDISK
 	help
 		Compress RAM disk.
 
-config CONFIG_AMBARELLA_ETH0
+menuconfig CONFIG_AMBARELLA_USB0
+	bool "Enable USB0 network adaptor"
+	default n
+	help
+		Configuration for usb0 network device
+
+config CONFIG_AMBARELLA_USB0_ADDRESS
+	depends on CONFIG_AMBARELLA_USB0
+	string "IP Address"
+	default "10.0.1.2"
+	help
+		IP Address for usb0
+
+config CONFIG_AMBARELLA_USB0_GW_ADDRESS
+	depends on CONFIG_AMBARELLA_USB0
+	string "GW Address"
+	default "10.0.1.1"
+	help
+		GW Address for usb0
+
+config CONFIG_AMBARELLA_USB0_IP_MASK
+	depends on CONFIG_AMBARELLA_USB0
+	string "IP Mask"
+	default "255.255.255.0"
+	help
+		IP Mask for usb0
+
+config CONFIG_AMBARELLA_USB0_MAC_HOST
+	depends on CONFIG_AMBARELLA_USB0
+	string "MAC address to host"
+	default "auto"
+	help
+		MAC address to host
+
+config CONFIG_AMBARELLA_USB0_MAC_DEVICE
+	depends on CONFIG_AMBARELLA_USB0
+	string "MAC address to device"
+	default "auto"
+	help
+		MAC address to device
+
+menuconfig CONFIG_AMBARELLA_ETH0
 	bool "Enable eth0"
 	default n
 	help
@@ -227,7 +286,7 @@ config CONFIG_AMBARELLA_ETH0_IP_MASK
 	help
 		IP Mask for eth0.
 
-config CONFIG_AMBARELLA_ETH1
+menuconfig CONFIG_AMBARELLA_ETH1
 	depends on CONFIG_ARCH_A7
 	bool "Enable eth1"
 	default n
@@ -361,6 +420,24 @@ config CONFIG_AMBARELLA_SERIAL_PORT1_NA
 endchoice
 
 choice
+	prompt "Serial Port 2 Configuration"
+	default CONFIG_AMBARELLA_SERIAL_PORT2_NA
+	help
+		Select ttyS2.
+
+config CONFIG_AMBARELLA_SERIAL_PORT2_GETTY
+	bool "Getty"
+	help
+		Put a getty on the serial port 2.
+
+config CONFIG_AMBARELLA_SERIAL_PORT2_NA
+	bool "Not used"
+	help
+		Not used.
+
+endchoice
+
+choice
 	prompt "askfirst Console Configuration"
 	default CONFIG_AMBARELLA_ASKFIRST_CONSOLE_NA
 	help
diff --git a/ext_bb/bbconfig b/ext_bb/bbconfig
index ee16c6f..87738ca 100644
--- a/ext_bb/bbconfig
+++ b/ext_bb/bbconfig
@@ -1,7 +1,7 @@
 #
 # Automatically generated make config: don't edit
-# Busybox version: 1.22.1
-# Thu Jul  3 15:06:35 2014
+# Busybox version: 1.24.1
+# Tue May 24 22:01:48 2016
 #
 CONFIG_HAVE_DOT_CONFIG=y
 
@@ -30,12 +30,14 @@ CONFIG_UNICODE_SUPPORT=y
 # CONFIG_UNICODE_USING_LOCALE is not set
 CONFIG_FEATURE_CHECK_UNICODE_IN_ENV=y
 CONFIG_SUBST_WCHAR=63
-CONFIG_LAST_SUPPORTED_WCHAR=767
+CONFIG_LAST_SUPPORTED_WCHAR=200000
 CONFIG_UNICODE_COMBINING_WCHARS=y
 CONFIG_UNICODE_WIDE_WCHARS=y
 CONFIG_UNICODE_BIDI_SUPPORT=y
 CONFIG_UNICODE_NEUTRAL_TABLE=y
 CONFIG_UNICODE_PRESERVE_BROKEN=y
+# CONFIG_PAM is not set
+CONFIG_FEATURE_USE_SENDFILE=y
 CONFIG_LONG_OPTS=y
 CONFIG_FEATURE_DEVPTS=y
 CONFIG_FEATURE_CLEAN_UP=y
@@ -73,6 +75,7 @@ CONFIG_EXTRA_LDLIBS=""
 #
 # CONFIG_DEBUG is not set
 # CONFIG_DEBUG_PESSIMIZE is not set
+# CONFIG_UNIT_TEST is not set
 # CONFIG_WERROR is not set
 CONFIG_NO_DEBUG_LIB=y
 # CONFIG_DMALLOC is not set
@@ -153,6 +156,7 @@ CONFIG_FEATURE_CPIO_P=y
 CONFIG_GZIP=y
 CONFIG_FEATURE_GZIP_LONG_OPTIONS=y
 CONFIG_GZIP_FAST=0
+# CONFIG_FEATURE_GZIP_LEVELS is not set
 # CONFIG_LZOP is not set
 # CONFIG_LZOP_COMPR_HIGH is not set
 CONFIG_RPM2CPIO=y
@@ -180,9 +184,17 @@ CONFIG_DATE=y
 CONFIG_FEATURE_DATE_ISOFMT=y
 # CONFIG_FEATURE_DATE_NANO is not set
 CONFIG_FEATURE_DATE_COMPAT=y
+CONFIG_DD=y
+CONFIG_FEATURE_DD_SIGNAL_HANDLING=y
+CONFIG_FEATURE_DD_THIRD_STATUS_LINE=y
+CONFIG_FEATURE_DD_IBS_OBS=y
+CONFIG_FEATURE_DD_STATUS=y
 CONFIG_HOSTID=y
 CONFIG_ID=y
 CONFIG_GROUPS=y
+CONFIG_SHUF=y
+CONFIG_SYNC=y
+CONFIG_FEATURE_SYNC_FANCY=y
 CONFIG_TEST=y
 CONFIG_FEATURE_TEST_64=y
 CONFIG_TOUCH=y
@@ -191,6 +203,8 @@ CONFIG_FEATURE_TOUCH_SUSV3=y
 CONFIG_TR=y
 CONFIG_FEATURE_TR_CLASSES=y
 CONFIG_FEATURE_TR_EQUIV=y
+CONFIG_TRUNCATE=y
+CONFIG_UNLINK=y
 CONFIG_BASE64=y
 CONFIG_WHO=y
 CONFIG_USERS=y
@@ -206,10 +220,6 @@ CONFIG_CKSUM=y
 CONFIG_CP=y
 CONFIG_FEATURE_CP_LONG_OPTIONS=y
 CONFIG_CUT=y
-CONFIG_DD=y
-CONFIG_FEATURE_DD_SIGNAL_HANDLING=y
-CONFIG_FEATURE_DD_THIRD_STATUS_LINE=y
-CONFIG_FEATURE_DD_IBS_OBS=y
 CONFIG_DF=y
 CONFIG_FEATURE_DF_FANCY=y
 CONFIG_DIRNAME=y
@@ -278,7 +288,6 @@ CONFIG_STAT=y
 CONFIG_FEATURE_STAT_FORMAT=y
 CONFIG_STTY=y
 CONFIG_SUM=y
-CONFIG_SYNC=y
 CONFIG_TAC=y
 CONFIG_TAIL=y
 CONFIG_FEATURE_FANCY_TAIL=y
@@ -287,6 +296,7 @@ CONFIG_FEATURE_TEE_USE_BLOCK_IO=y
 CONFIG_TRUE=y
 CONFIG_TTY=y
 CONFIG_UNAME=y
+CONFIG_UNAME_OSNAME="Flexible Linux"
 CONFIG_UNEXPAND=y
 CONFIG_FEATURE_UNEXPAND_LONG_OPTIONS=y
 CONFIG_UNIQ=y
@@ -299,6 +309,11 @@ CONFIG_WHOAMI=y
 CONFIG_YES=y
 
 #
+# Common options
+#
+CONFIG_FEATURE_VERBOSE=y
+
+#
 # Common options for cp and mv
 #
 CONFIG_FEATURE_PRESERVE_HARDLINKS=y
@@ -388,6 +403,9 @@ CONFIG_FEATURE_VI_SETOPTS=y
 CONFIG_FEATURE_VI_SET=y
 CONFIG_FEATURE_VI_WIN_RESIZE=y
 CONFIG_FEATURE_VI_ASK_TERMINAL=y
+CONFIG_FEATURE_VI_UNDO=y
+CONFIG_FEATURE_VI_UNDO_QUEUE=y
+CONFIG_FEATURE_VI_UNDO_QUEUE_MAX=256
 CONFIG_FEATURE_ALLOW_EXEC=y
 
 #
@@ -404,6 +422,7 @@ CONFIG_FEATURE_FIND_MAXDEPTH=y
 CONFIG_FEATURE_FIND_NEWER=y
 CONFIG_FEATURE_FIND_INUM=y
 CONFIG_FEATURE_FIND_EXEC=y
+CONFIG_FEATURE_FIND_EXEC_PLUS=y
 CONFIG_FEATURE_FIND_USER=y
 CONFIG_FEATURE_FIND_GROUP=y
 CONFIG_FEATURE_FIND_NOT=y
@@ -425,6 +444,7 @@ CONFIG_FEATURE_XARGS_SUPPORT_CONFIRMATION=y
 CONFIG_FEATURE_XARGS_SUPPORT_QUOTES=y
 CONFIG_FEATURE_XARGS_SUPPORT_TERMOPT=y
 CONFIG_FEATURE_XARGS_SUPPORT_ZERO_TERM=y
+CONFIG_FEATURE_XARGS_SUPPORT_REPL_STR=y
 
 #
 # Init Utilities
@@ -461,6 +481,7 @@ CONFIG_USE_BB_CRYPT_SHA=y
 CONFIG_ADDUSER=y
 CONFIG_FEATURE_ADDUSER_LONG_OPTIONS=y
 CONFIG_FEATURE_CHECK_NAMES=y
+CONFIG_LAST_ID=60000
 CONFIG_FIRST_SYSTEM_ID=100
 CONFIG_LAST_SYSTEM_ID=999
 CONFIG_ADDGROUP=y
@@ -472,7 +493,6 @@ CONFIG_FEATURE_DEL_USER_FROM_GROUP=y
 CONFIG_GETTY=y
 CONFIG_LOGIN=y
 # CONFIG_LOGIN_SESSION_AS_CHILD is not set
-# CONFIG_PAM is not set
 CONFIG_LOGIN_SCRIPTS=y
 CONFIG_FEATURE_NOLOGIN=y
 CONFIG_FEATURE_SECURETTY=y
@@ -530,6 +550,7 @@ CONFIG_DEFAULT_DEPMOD_FILE="modules.dep"
 # Linux System Utilities
 #
 CONFIG_BLOCKDEV=y
+CONFIG_FATATTR=y
 CONFIG_FSTRIM=y
 # CONFIG_MDEV is not set
 # CONFIG_FEATURE_MDEV_CONF is not set
@@ -537,7 +558,18 @@ CONFIG_FSTRIM=y
 # CONFIG_FEATURE_MDEV_RENAME_REGEXP is not set
 # CONFIG_FEATURE_MDEV_EXEC is not set
 # CONFIG_FEATURE_MDEV_LOAD_FIRMWARE is not set
+CONFIG_MOUNT=y
+CONFIG_FEATURE_MOUNT_FAKE=y
+CONFIG_FEATURE_MOUNT_VERBOSE=y
+CONFIG_FEATURE_MOUNT_HELPERS=y
+CONFIG_FEATURE_MOUNT_LABEL=y
+CONFIG_FEATURE_MOUNT_NFS=y
+CONFIG_FEATURE_MOUNT_CIFS=y
+CONFIG_FEATURE_MOUNT_FLAGS=y
+CONFIG_FEATURE_MOUNT_FSTAB=y
+CONFIG_FEATURE_MOUNT_OTHERTAB=y
 CONFIG_REV=y
+CONFIG_UEVENT=y
 # CONFIG_ACPID is not set
 # CONFIG_FEATURE_ACPID_COMPAT is not set
 CONFIG_BLKID=y
@@ -583,15 +615,6 @@ CONFIG_LSUSB=y
 CONFIG_MKSWAP=y
 CONFIG_FEATURE_MKSWAP_UUID=y
 CONFIG_MORE=y
-CONFIG_MOUNT=y
-CONFIG_FEATURE_MOUNT_FAKE=y
-CONFIG_FEATURE_MOUNT_VERBOSE=y
-CONFIG_FEATURE_MOUNT_HELPERS=y
-CONFIG_FEATURE_MOUNT_LABEL=y
-CONFIG_FEATURE_MOUNT_NFS=y
-CONFIG_FEATURE_MOUNT_CIFS=y
-CONFIG_FEATURE_MOUNT_FLAGS=y
-CONFIG_FEATURE_MOUNT_FSTAB=y
 CONFIG_PIVOT_ROOT=y
 CONFIG_RDATE=y
 CONFIG_RDEV=y
@@ -601,6 +624,7 @@ CONFIG_SCRIPT=y
 # CONFIG_SCRIPTREPLAY is not set
 CONFIG_SETARCH=y
 CONFIG_SWAPONOFF=y
+CONFIG_FEATURE_SWAPON_DISCARD=y
 CONFIG_FEATURE_SWAPON_PRI=y
 CONFIG_SWITCH_ROOT=y
 CONFIG_UMOUNT=y
@@ -643,10 +667,19 @@ CONFIG_FEATURE_VOLUMEID_ROMFS=y
 # Miscellaneous Utilities
 #
 # CONFIG_CONSPY is not set
+CONFIG_CROND=y
+CONFIG_FEATURE_CROND_D=y
+# CONFIG_FEATURE_CROND_CALL_SENDMAIL is not set
+CONFIG_FEATURE_CROND_DIR="/var/spool/cron"
+CONFIG_I2CGET=y
+CONFIG_I2CSET=y
+CONFIG_I2CDUMP=y
+CONFIG_I2CDETECT=y
 CONFIG_LESS=y
 CONFIG_FEATURE_LESS_MAXLINES=9999999
 CONFIG_FEATURE_LESS_BRACKETS=y
 CONFIG_FEATURE_LESS_FLAGS=y
+CONFIG_FEATURE_LESS_TRUNCATE=y
 CONFIG_FEATURE_LESS_MARKS=y
 CONFIG_FEATURE_LESS_REGEXP=y
 CONFIG_FEATURE_LESS_WINCH=y
@@ -655,8 +688,10 @@ CONFIG_FEATURE_LESS_DASHCMD=y
 CONFIG_FEATURE_LESS_LINENUMS=y
 CONFIG_NANDWRITE=y
 CONFIG_NANDDUMP=y
-# CONFIG_RFKILL is not set
+CONFIG_RFKILL=y
 CONFIG_SETSERIAL=y
+CONFIG_TASKSET=y
+CONFIG_FEATURE_TASKSET_FANCY=y
 CONFIG_UBIATTACH=y
 CONFIG_UBIDETACH=y
 CONFIG_UBIMKVOL=y
@@ -679,10 +714,6 @@ CONFIG_FEATURE_CHAT_SWALLOW_OPTS=y
 # CONFIG_FEATURE_CHAT_VAR_ABORT_LEN is not set
 # CONFIG_FEATURE_CHAT_CLR_ABORT is not set
 CONFIG_CHRT=y
-CONFIG_CROND=y
-CONFIG_FEATURE_CROND_D=y
-# CONFIG_FEATURE_CROND_CALL_SENDMAIL is not set
-CONFIG_FEATURE_CROND_DIR="/var/spool/cron"
 CONFIG_CRONTAB=y
 CONFIG_DC=y
 CONFIG_FEATURE_DC_LIBM=y
@@ -724,8 +755,6 @@ CONFIG_RUNLEVEL=y
 CONFIG_RX=y
 CONFIG_SETSID=y
 CONFIG_STRINGS=y
-# CONFIG_TASKSET is not set
-# CONFIG_FEATURE_TASKSET_FANCY is not set
 CONFIG_TIME=y
 CONFIG_TIMEOUT=y
 CONFIG_TTYSIZE=y
@@ -745,6 +774,13 @@ CONFIG_NC_110_COMPAT=y
 CONFIG_PING=y
 # CONFIG_PING6 is not set
 CONFIG_FEATURE_FANCY_PING=y
+CONFIG_WGET=y
+CONFIG_FEATURE_WGET_STATUSBAR=y
+CONFIG_FEATURE_WGET_AUTHENTICATION=y
+CONFIG_FEATURE_WGET_LONG_OPTIONS=y
+CONFIG_FEATURE_WGET_TIMEOUT=y
+CONFIG_FEATURE_WGET_OPENSSL=y
+CONFIG_FEATURE_WGET_SSL_HELPER=y
 CONFIG_WHOIS=y
 # CONFIG_FEATURE_IPV6 is not set
 # CONFIG_FEATURE_UNIX_LOCAL is not set
@@ -761,13 +797,13 @@ CONFIG_ETHER_WAKE=y
 CONFIG_FTPD=y
 CONFIG_FEATURE_FTP_WRITE=y
 CONFIG_FEATURE_FTPD_ACCEPT_BROKEN_LIST=y
+CONFIG_FEATURE_FTP_AUTHENTICATION=y
 CONFIG_FTPGET=y
 CONFIG_FTPPUT=y
 CONFIG_FEATURE_FTPGETPUT_LONG_OPTIONS=y
 CONFIG_HOSTNAME=y
 CONFIG_HTTPD=y
 CONFIG_FEATURE_HTTPD_RANGES=y
-CONFIG_FEATURE_HTTPD_USE_SENDFILE=y
 CONFIG_FEATURE_HTTPD_SETUID=y
 CONFIG_FEATURE_HTTPD_BASIC_AUTH=y
 CONFIG_FEATURE_HTTPD_AUTH_MD5=y
@@ -806,6 +842,7 @@ CONFIG_IP=y
 CONFIG_FEATURE_IP_ADDRESS=y
 CONFIG_FEATURE_IP_LINK=y
 CONFIG_FEATURE_IP_ROUTE=y
+CONFIG_FEATURE_IP_ROUTE_DIR="/etc/iproute2"
 CONFIG_FEATURE_IP_TUNNEL=y
 CONFIG_FEATURE_IP_RULE=y
 CONFIG_FEATURE_IP_SHORT_FORMS=y
@@ -824,6 +861,7 @@ CONFIG_FEATURE_NETSTAT_PRG=y
 CONFIG_NSLOOKUP=y
 CONFIG_NTPD=y
 CONFIG_FEATURE_NTPD_SERVER=y
+CONFIG_FEATURE_NTPD_CONF=y
 CONFIG_PSCAN=y
 CONFIG_ROUTE=y
 CONFIG_SLATTACH=y
@@ -861,6 +899,7 @@ CONFIG_DUMPLEASES=y
 CONFIG_DHCPD_LEASES_FILE=""
 CONFIG_UDHCPC=y
 CONFIG_FEATURE_UDHCPC_ARPING=y
+CONFIG_FEATURE_UDHCPC_SANITIZEOPT=y
 # CONFIG_FEATURE_UDHCP_PORT is not set
 CONFIG_UDHCP_DEBUG=0
 # CONFIG_FEATURE_UDHCP_RFC3397 is not set
@@ -870,11 +909,6 @@ CONFIG_UDHCPC_SLACK_FOR_BUGGY_SERVERS=80
 CONFIG_IFUPDOWN_UDHCPC_CMD_OPTIONS="-R -n"
 # CONFIG_UDPSVD is not set
 CONFIG_VCONFIG=y
-CONFIG_WGET=y
-CONFIG_FEATURE_WGET_STATUSBAR=y
-CONFIG_FEATURE_WGET_AUTHENTICATION=y
-CONFIG_FEATURE_WGET_LONG_OPTIONS=y
-CONFIG_FEATURE_WGET_TIMEOUT=y
 # CONFIG_ZCIP is not set
 
 #
@@ -979,6 +1013,7 @@ CONFIG_ASH_ALIAS=y
 CONFIG_ASH_BUILTIN_ECHO=y
 CONFIG_ASH_BUILTIN_PRINTF=y
 CONFIG_ASH_BUILTIN_TEST=y
+CONFIG_ASH_HELP=y
 CONFIG_ASH_CMDCMD=y
 # CONFIG_ASH_MAIL is not set
 CONFIG_ASH_OPTIMIZE_FOR_SIZE=y
diff --git a/ext_bb/bbconfig_static b/ext_bb/bbconfig_static
index 4a803e6..b221e68 100644
--- a/ext_bb/bbconfig_static
+++ b/ext_bb/bbconfig_static
@@ -1,7 +1,7 @@
 #
 # Automatically generated make config: don't edit
-# Busybox version: 1.22.1
-# Thu Jul  3 15:06:35 2014
+# Busybox version: 1.24.1
+# Tue May 24 22:01:48 2016
 #
 CONFIG_HAVE_DOT_CONFIG=y
 
@@ -30,12 +30,14 @@ CONFIG_UNICODE_SUPPORT=y
 # CONFIG_UNICODE_USING_LOCALE is not set
 CONFIG_FEATURE_CHECK_UNICODE_IN_ENV=y
 CONFIG_SUBST_WCHAR=63
-CONFIG_LAST_SUPPORTED_WCHAR=767
+CONFIG_LAST_SUPPORTED_WCHAR=200000
 CONFIG_UNICODE_COMBINING_WCHARS=y
 CONFIG_UNICODE_WIDE_WCHARS=y
 CONFIG_UNICODE_BIDI_SUPPORT=y
 CONFIG_UNICODE_NEUTRAL_TABLE=y
 CONFIG_UNICODE_PRESERVE_BROKEN=y
+# CONFIG_PAM is not set
+CONFIG_FEATURE_USE_SENDFILE=y
 CONFIG_LONG_OPTS=y
 CONFIG_FEATURE_DEVPTS=y
 CONFIG_FEATURE_CLEAN_UP=y
@@ -73,6 +75,7 @@ CONFIG_EXTRA_LDLIBS=""
 #
 # CONFIG_DEBUG is not set
 # CONFIG_DEBUG_PESSIMIZE is not set
+# CONFIG_UNIT_TEST is not set
 # CONFIG_WERROR is not set
 CONFIG_NO_DEBUG_LIB=y
 # CONFIG_DMALLOC is not set
@@ -153,6 +156,7 @@ CONFIG_FEATURE_CPIO_P=y
 CONFIG_GZIP=y
 CONFIG_FEATURE_GZIP_LONG_OPTIONS=y
 CONFIG_GZIP_FAST=0
+# CONFIG_FEATURE_GZIP_LEVELS is not set
 # CONFIG_LZOP is not set
 # CONFIG_LZOP_COMPR_HIGH is not set
 CONFIG_RPM2CPIO=y
@@ -180,9 +184,17 @@ CONFIG_DATE=y
 CONFIG_FEATURE_DATE_ISOFMT=y
 # CONFIG_FEATURE_DATE_NANO is not set
 CONFIG_FEATURE_DATE_COMPAT=y
+CONFIG_DD=y
+CONFIG_FEATURE_DD_SIGNAL_HANDLING=y
+CONFIG_FEATURE_DD_THIRD_STATUS_LINE=y
+CONFIG_FEATURE_DD_IBS_OBS=y
+CONFIG_FEATURE_DD_STATUS=y
 CONFIG_HOSTID=y
 CONFIG_ID=y
 CONFIG_GROUPS=y
+CONFIG_SHUF=y
+CONFIG_SYNC=y
+CONFIG_FEATURE_SYNC_FANCY=y
 CONFIG_TEST=y
 CONFIG_FEATURE_TEST_64=y
 CONFIG_TOUCH=y
@@ -191,6 +203,8 @@ CONFIG_FEATURE_TOUCH_SUSV3=y
 CONFIG_TR=y
 CONFIG_FEATURE_TR_CLASSES=y
 CONFIG_FEATURE_TR_EQUIV=y
+CONFIG_TRUNCATE=y
+CONFIG_UNLINK=y
 CONFIG_BASE64=y
 CONFIG_WHO=y
 CONFIG_USERS=y
@@ -206,10 +220,6 @@ CONFIG_CKSUM=y
 CONFIG_CP=y
 CONFIG_FEATURE_CP_LONG_OPTIONS=y
 CONFIG_CUT=y
-CONFIG_DD=y
-CONFIG_FEATURE_DD_SIGNAL_HANDLING=y
-CONFIG_FEATURE_DD_THIRD_STATUS_LINE=y
-CONFIG_FEATURE_DD_IBS_OBS=y
 CONFIG_DF=y
 CONFIG_FEATURE_DF_FANCY=y
 CONFIG_DIRNAME=y
@@ -278,7 +288,6 @@ CONFIG_STAT=y
 CONFIG_FEATURE_STAT_FORMAT=y
 CONFIG_STTY=y
 CONFIG_SUM=y
-CONFIG_SYNC=y
 CONFIG_TAC=y
 CONFIG_TAIL=y
 CONFIG_FEATURE_FANCY_TAIL=y
@@ -287,6 +296,7 @@ CONFIG_FEATURE_TEE_USE_BLOCK_IO=y
 CONFIG_TRUE=y
 CONFIG_TTY=y
 CONFIG_UNAME=y
+CONFIG_UNAME_OSNAME="Flexible Linux"
 CONFIG_UNEXPAND=y
 CONFIG_FEATURE_UNEXPAND_LONG_OPTIONS=y
 CONFIG_UNIQ=y
@@ -299,6 +309,11 @@ CONFIG_WHOAMI=y
 CONFIG_YES=y
 
 #
+# Common options
+#
+CONFIG_FEATURE_VERBOSE=y
+
+#
 # Common options for cp and mv
 #
 CONFIG_FEATURE_PRESERVE_HARDLINKS=y
@@ -388,6 +403,9 @@ CONFIG_FEATURE_VI_SETOPTS=y
 CONFIG_FEATURE_VI_SET=y
 CONFIG_FEATURE_VI_WIN_RESIZE=y
 CONFIG_FEATURE_VI_ASK_TERMINAL=y
+CONFIG_FEATURE_VI_UNDO=y
+CONFIG_FEATURE_VI_UNDO_QUEUE=y
+CONFIG_FEATURE_VI_UNDO_QUEUE_MAX=256
 CONFIG_FEATURE_ALLOW_EXEC=y
 
 #
@@ -404,6 +422,7 @@ CONFIG_FEATURE_FIND_MAXDEPTH=y
 CONFIG_FEATURE_FIND_NEWER=y
 CONFIG_FEATURE_FIND_INUM=y
 CONFIG_FEATURE_FIND_EXEC=y
+CONFIG_FEATURE_FIND_EXEC_PLUS=y
 CONFIG_FEATURE_FIND_USER=y
 CONFIG_FEATURE_FIND_GROUP=y
 CONFIG_FEATURE_FIND_NOT=y
@@ -425,6 +444,7 @@ CONFIG_FEATURE_XARGS_SUPPORT_CONFIRMATION=y
 CONFIG_FEATURE_XARGS_SUPPORT_QUOTES=y
 CONFIG_FEATURE_XARGS_SUPPORT_TERMOPT=y
 CONFIG_FEATURE_XARGS_SUPPORT_ZERO_TERM=y
+CONFIG_FEATURE_XARGS_SUPPORT_REPL_STR=y
 
 #
 # Init Utilities
@@ -461,6 +481,7 @@ CONFIG_USE_BB_CRYPT_SHA=y
 CONFIG_ADDUSER=y
 CONFIG_FEATURE_ADDUSER_LONG_OPTIONS=y
 CONFIG_FEATURE_CHECK_NAMES=y
+CONFIG_LAST_ID=60000
 CONFIG_FIRST_SYSTEM_ID=100
 CONFIG_LAST_SYSTEM_ID=999
 CONFIG_ADDGROUP=y
@@ -472,7 +493,6 @@ CONFIG_FEATURE_DEL_USER_FROM_GROUP=y
 CONFIG_GETTY=y
 CONFIG_LOGIN=y
 # CONFIG_LOGIN_SESSION_AS_CHILD is not set
-# CONFIG_PAM is not set
 CONFIG_LOGIN_SCRIPTS=y
 CONFIG_FEATURE_NOLOGIN=y
 CONFIG_FEATURE_SECURETTY=y
@@ -530,6 +550,7 @@ CONFIG_DEFAULT_DEPMOD_FILE="modules.dep"
 # Linux System Utilities
 #
 CONFIG_BLOCKDEV=y
+CONFIG_FATATTR=y
 CONFIG_FSTRIM=y
 # CONFIG_MDEV is not set
 # CONFIG_FEATURE_MDEV_CONF is not set
@@ -537,7 +558,18 @@ CONFIG_FSTRIM=y
 # CONFIG_FEATURE_MDEV_RENAME_REGEXP is not set
 # CONFIG_FEATURE_MDEV_EXEC is not set
 # CONFIG_FEATURE_MDEV_LOAD_FIRMWARE is not set
+CONFIG_MOUNT=y
+CONFIG_FEATURE_MOUNT_FAKE=y
+CONFIG_FEATURE_MOUNT_VERBOSE=y
+CONFIG_FEATURE_MOUNT_HELPERS=y
+CONFIG_FEATURE_MOUNT_LABEL=y
+CONFIG_FEATURE_MOUNT_NFS=y
+CONFIG_FEATURE_MOUNT_CIFS=y
+CONFIG_FEATURE_MOUNT_FLAGS=y
+CONFIG_FEATURE_MOUNT_FSTAB=y
+CONFIG_FEATURE_MOUNT_OTHERTAB=y
 CONFIG_REV=y
+CONFIG_UEVENT=y
 # CONFIG_ACPID is not set
 # CONFIG_FEATURE_ACPID_COMPAT is not set
 CONFIG_BLKID=y
@@ -583,15 +615,6 @@ CONFIG_LSUSB=y
 CONFIG_MKSWAP=y
 CONFIG_FEATURE_MKSWAP_UUID=y
 CONFIG_MORE=y
-CONFIG_MOUNT=y
-CONFIG_FEATURE_MOUNT_FAKE=y
-CONFIG_FEATURE_MOUNT_VERBOSE=y
-CONFIG_FEATURE_MOUNT_HELPERS=y
-CONFIG_FEATURE_MOUNT_LABEL=y
-CONFIG_FEATURE_MOUNT_NFS=y
-CONFIG_FEATURE_MOUNT_CIFS=y
-CONFIG_FEATURE_MOUNT_FLAGS=y
-CONFIG_FEATURE_MOUNT_FSTAB=y
 CONFIG_PIVOT_ROOT=y
 CONFIG_RDATE=y
 CONFIG_RDEV=y
@@ -601,6 +624,7 @@ CONFIG_SCRIPT=y
 # CONFIG_SCRIPTREPLAY is not set
 CONFIG_SETARCH=y
 CONFIG_SWAPONOFF=y
+CONFIG_FEATURE_SWAPON_DISCARD=y
 CONFIG_FEATURE_SWAPON_PRI=y
 CONFIG_SWITCH_ROOT=y
 CONFIG_UMOUNT=y
@@ -643,10 +667,19 @@ CONFIG_FEATURE_VOLUMEID_ROMFS=y
 # Miscellaneous Utilities
 #
 # CONFIG_CONSPY is not set
+CONFIG_CROND=y
+CONFIG_FEATURE_CROND_D=y
+# CONFIG_FEATURE_CROND_CALL_SENDMAIL is not set
+CONFIG_FEATURE_CROND_DIR="/var/spool/cron"
+CONFIG_I2CGET=y
+CONFIG_I2CSET=y
+CONFIG_I2CDUMP=y
+CONFIG_I2CDETECT=y
 CONFIG_LESS=y
 CONFIG_FEATURE_LESS_MAXLINES=9999999
 CONFIG_FEATURE_LESS_BRACKETS=y
 CONFIG_FEATURE_LESS_FLAGS=y
+CONFIG_FEATURE_LESS_TRUNCATE=y
 CONFIG_FEATURE_LESS_MARKS=y
 CONFIG_FEATURE_LESS_REGEXP=y
 CONFIG_FEATURE_LESS_WINCH=y
@@ -655,8 +688,10 @@ CONFIG_FEATURE_LESS_DASHCMD=y
 CONFIG_FEATURE_LESS_LINENUMS=y
 CONFIG_NANDWRITE=y
 CONFIG_NANDDUMP=y
-# CONFIG_RFKILL is not set
+CONFIG_RFKILL=y
 CONFIG_SETSERIAL=y
+CONFIG_TASKSET=y
+CONFIG_FEATURE_TASKSET_FANCY=y
 CONFIG_UBIATTACH=y
 CONFIG_UBIDETACH=y
 CONFIG_UBIMKVOL=y
@@ -679,10 +714,6 @@ CONFIG_FEATURE_CHAT_SWALLOW_OPTS=y
 # CONFIG_FEATURE_CHAT_VAR_ABORT_LEN is not set
 # CONFIG_FEATURE_CHAT_CLR_ABORT is not set
 CONFIG_CHRT=y
-CONFIG_CROND=y
-CONFIG_FEATURE_CROND_D=y
-# CONFIG_FEATURE_CROND_CALL_SENDMAIL is not set
-CONFIG_FEATURE_CROND_DIR="/var/spool/cron"
 CONFIG_CRONTAB=y
 CONFIG_DC=y
 CONFIG_FEATURE_DC_LIBM=y
@@ -724,8 +755,6 @@ CONFIG_RUNLEVEL=y
 CONFIG_RX=y
 CONFIG_SETSID=y
 CONFIG_STRINGS=y
-# CONFIG_TASKSET is not set
-# CONFIG_FEATURE_TASKSET_FANCY is not set
 CONFIG_TIME=y
 CONFIG_TIMEOUT=y
 CONFIG_TTYSIZE=y
@@ -745,6 +774,13 @@ CONFIG_NC_110_COMPAT=y
 CONFIG_PING=y
 # CONFIG_PING6 is not set
 CONFIG_FEATURE_FANCY_PING=y
+CONFIG_WGET=y
+CONFIG_FEATURE_WGET_STATUSBAR=y
+CONFIG_FEATURE_WGET_AUTHENTICATION=y
+CONFIG_FEATURE_WGET_LONG_OPTIONS=y
+CONFIG_FEATURE_WGET_TIMEOUT=y
+CONFIG_FEATURE_WGET_OPENSSL=y
+CONFIG_FEATURE_WGET_SSL_HELPER=y
 CONFIG_WHOIS=y
 # CONFIG_FEATURE_IPV6 is not set
 # CONFIG_FEATURE_UNIX_LOCAL is not set
@@ -761,13 +797,13 @@ CONFIG_ETHER_WAKE=y
 CONFIG_FTPD=y
 CONFIG_FEATURE_FTP_WRITE=y
 CONFIG_FEATURE_FTPD_ACCEPT_BROKEN_LIST=y
+CONFIG_FEATURE_FTP_AUTHENTICATION=y
 CONFIG_FTPGET=y
 CONFIG_FTPPUT=y
 CONFIG_FEATURE_FTPGETPUT_LONG_OPTIONS=y
 CONFIG_HOSTNAME=y
 CONFIG_HTTPD=y
 CONFIG_FEATURE_HTTPD_RANGES=y
-CONFIG_FEATURE_HTTPD_USE_SENDFILE=y
 CONFIG_FEATURE_HTTPD_SETUID=y
 CONFIG_FEATURE_HTTPD_BASIC_AUTH=y
 CONFIG_FEATURE_HTTPD_AUTH_MD5=y
@@ -806,6 +842,7 @@ CONFIG_IP=y
 CONFIG_FEATURE_IP_ADDRESS=y
 CONFIG_FEATURE_IP_LINK=y
 CONFIG_FEATURE_IP_ROUTE=y
+CONFIG_FEATURE_IP_ROUTE_DIR="/etc/iproute2"
 CONFIG_FEATURE_IP_TUNNEL=y
 CONFIG_FEATURE_IP_RULE=y
 CONFIG_FEATURE_IP_SHORT_FORMS=y
@@ -824,6 +861,7 @@ CONFIG_FEATURE_NETSTAT_PRG=y
 CONFIG_NSLOOKUP=y
 CONFIG_NTPD=y
 CONFIG_FEATURE_NTPD_SERVER=y
+CONFIG_FEATURE_NTPD_CONF=y
 CONFIG_PSCAN=y
 CONFIG_ROUTE=y
 CONFIG_SLATTACH=y
@@ -861,6 +899,7 @@ CONFIG_DUMPLEASES=y
 CONFIG_DHCPD_LEASES_FILE=""
 CONFIG_UDHCPC=y
 CONFIG_FEATURE_UDHCPC_ARPING=y
+CONFIG_FEATURE_UDHCPC_SANITIZEOPT=y
 # CONFIG_FEATURE_UDHCP_PORT is not set
 CONFIG_UDHCP_DEBUG=0
 # CONFIG_FEATURE_UDHCP_RFC3397 is not set
@@ -870,11 +909,6 @@ CONFIG_UDHCPC_SLACK_FOR_BUGGY_SERVERS=80
 CONFIG_IFUPDOWN_UDHCPC_CMD_OPTIONS="-R -n"
 # CONFIG_UDPSVD is not set
 CONFIG_VCONFIG=y
-CONFIG_WGET=y
-CONFIG_FEATURE_WGET_STATUSBAR=y
-CONFIG_FEATURE_WGET_AUTHENTICATION=y
-CONFIG_FEATURE_WGET_LONG_OPTIONS=y
-CONFIG_FEATURE_WGET_TIMEOUT=y
 # CONFIG_ZCIP is not set
 
 #
@@ -979,6 +1013,7 @@ CONFIG_ASH_ALIAS=y
 CONFIG_ASH_BUILTIN_ECHO=y
 CONFIG_ASH_BUILTIN_PRINTF=y
 CONFIG_ASH_BUILTIN_TEST=y
+CONFIG_ASH_HELP=y
 CONFIG_ASH_CMDCMD=y
 # CONFIG_ASH_MAIL is not set
 CONFIG_ASH_OPTIMIZE_FOR_SIZE=y
diff --git a/ext_bb/make.inc b/ext_bb/make.inc
index 273bfd8..733d2e7 100644
--- a/ext_bb/make.inc
+++ b/ext_bb/make.inc
@@ -4,12 +4,29 @@
 ## History:
 ##    2012/06/03 - [Cao Rongrong] Created file
 ##
-## Copyright (C) 2012-2016, Ambarella, Inc.
+## Copyright (c) 2016 Ambarella, Inc.
 ##
-## All rights reserved. No Part of this file may be reproduced, stored
-## in a retrieval system, or transmitted, in any form, or by any means,
-## electronic, mechanical, photocopying, recording, or otherwise,
-## without the prior consent of Ambarella, Inc.
+## This file and its contents ("Software") are protected by intellectual
+## property rights including, without limitation, U.S. and/or foreign
+## copyrights. This Software is also the confidential and proprietary
+## information of Ambarella, Inc. and its licensors. You may not use, reproduce,
+## disclose, distribute, modify, or otherwise prepare derivative works of this
+## Software or any portion thereof except pursuant to a signed license agreement
+## or nondisclosure agreement with Ambarella, Inc. or its authorized affiliates.
+## In the absence of such an agreement, you agree to promptly notify and return
+## this Software to Ambarella, Inc.
+##
+## THIS SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,
+## INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF NON-INFRINGEMENT,
+## MERCHANTABILITY, AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
+## IN NO EVENT SHALL AMBARELLA, INC. OR ITS AFFILIATES BE LIABLE FOR ANY DIRECT,
+## INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
+## (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
+## LOSS OF USE, DATA, OR PROFITS; COMPUTER FAILURE OR MALFUNCTION; OR BUSINESS
+## INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
+## CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
+## ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
+## POSSIBILITY OF SUCH DAMAGE.
 ##
 
 LOCAL_PATH		:= $(call my-dir)
@@ -28,7 +45,7 @@ BB_CONFIG := bbconfig
 endif
 
 define build_ext_busybox
-$(MAKE) ARCH=arm EXTRA_CFLAGS=$(BUSYBOX_EXTRA_CFLAGS) \
+$(MAKE) ARCH=$(CPU_ARCH) EXTRA_CFLAGS=$(BUSYBOX_EXTRA_CFLAGS) \
 	EXTRA_LDFLAGS=$(BUSYBOX_EXTRA_LDFLAGS) \
 	CONFIG_PREFIX=$(FAKEROOT_DIR) \
 	KBUILD_SRC=$(BUSYBOX_SRC_DIR) -f $(BUSYBOX_SRC_DIR)/Makefile $(1)
diff --git a/initramfs_table.txt b/initramfs_table.txt
index ff00a1a..f66fa34 100644
--- a/initramfs_table.txt
+++ b/initramfs_table.txt
@@ -72,6 +72,7 @@
 /dev/ttyP	c	666	0	0	57	0	0	1	4
 /dev/ttyS	c	666	0	0	4	64	0	1	4
 /dev/fb		c	640	0	5	29	0	0	1	4
+/dev/fuse	c	666 0	0	10	229	-	-	-
 /dev/ttySAC	c	666	0	0	204	64	0	1	4
 /dev/psaux	c	666	0	0	10	1	0	0	-
 /dev/ppp	c	666	0	0	108	0	-	-	-
@@ -87,7 +88,7 @@
 /dev/ambad	c	666	0	0	248	248	-	-	-
 /dev/dsplog	c	666	0	0	248	249	-	-	-
 /dev/rtc0	c	640	0	0	254	0	-	-	-
-/dev/mmc	b	640	0	0	179	0	0	1	4
+#/dev/mmc	b	640	0	0	179	0	0	1	4
 /dev/watchdog	c	640	0	0	10	130	-	-	-
 /dev/ttygs	c	666	0	0	127	0	0	1	4
 
diff --git a/make.inc b/make.inc
index abaa6f9..18cd257 100644
--- a/make.inc
+++ b/make.inc
@@ -4,12 +4,29 @@
 ## History:
 ##    2012/05/29 - [Cao Rongrong] Created file
 ##
-## Copyright (C) 2012-2016, Ambarella, Inc.
+## Copyright (c) 2016 Ambarella, Inc.
 ##
-## All rights reserved. No Part of this file may be reproduced, stored
-## in a retrieval system, or transmitted, in any form, or by any means,
-## electronic, mechanical, photocopying, recording, or otherwise,
-## without the prior consent of Ambarella, Inc.
+## This file and its contents ("Software") are protected by intellectual
+## property rights including, without limitation, U.S. and/or foreign
+## copyrights. This Software is also the confidential and proprietary
+## information of Ambarella, Inc. and its licensors. You may not use, reproduce,
+## disclose, distribute, modify, or otherwise prepare derivative works of this
+## Software or any portion thereof except pursuant to a signed license agreement
+## or nondisclosure agreement with Ambarella, Inc. or its authorized affiliates.
+## In the absence of such an agreement, you agree to promptly notify and return
+## this Software to Ambarella, Inc.
+##
+## THIS SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,
+## INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF NON-INFRINGEMENT,
+## MERCHANTABILITY, AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
+## IN NO EVENT SHALL AMBARELLA, INC. OR ITS AFFILIATES BE LIABLE FOR ANY DIRECT,
+## INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
+## (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
+## LOSS OF USE, DATA, OR PROFITS; COMPUTER FAILURE OR MALFUNCTION; OR BUSINESS
+## INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
+## CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
+## ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
+## POSSIBILITY OF SUCH DAMAGE.
 ##
 
 ifeq ($(CONFIG_AMBARELLA_MKFS), y)
@@ -18,6 +35,18 @@ ROOTFS_DIR		:= $(call my-dir)
 PRE_BUSYBOX_DIR		:= $(AMB_TOPDIR)/prebuild/third-party/$(AMBARELLA_CPU_ARCH)/busybox
 EXT_BUSYBOX_DIR		:= $(AMB_TOPDIR)/../external/busybox
 
+ifeq ($(CONFIG_CPU_CORTEXA53), y)
+ifeq ($(CONFIG_ARMV8_AARCH32), y)
+ARM_ARCH		:= arm
+else
+ARM_ARCH		:= arm64
+endif
+else
+ARM_ARCH		:= arm
+endif
+
+
+
 ####### Basic Filesystem #######
 
 include $(ROOTFS_DIR)/ext_bb/make.inc
@@ -46,6 +75,18 @@ else ifeq ($(CONFIG_CPU_CORTEXA9_HF), y)
 	@cp -dpRf $(shell find $(SYS_LIB_DIR_ARMV7)/ -name "*.so.*" | grep -v stdc++) $(FAKEROOT_DIR)/lib/
 	@cp -dpRf $(GCC_LIB_DIR_ARMV7)/libgcc*.so* $(FAKEROOT_DIR)/lib/
 	@cp -dpRf $(CPP_LIB_DIR_ARMV7)/libstdc++.so* $(FAKEROOT_DIR)/usr/lib/
+else ifeq ($(CONFIG_CPU_CORTEXA53), y)
+ifeq ($(CONFIG_ARMV8_AARCH32), y)
+	@cp -dpRf $(shell find $(SYS_LIB_DIR_ARMV8)/ -name "*.so" | grep -v stdc++) $(FAKEROOT_DIR)/lib/
+	@cp -dpRf $(shell find $(SYS_LIB_DIR_ARMV8)/ -name "*.so.*" | grep -v stdc++) $(FAKEROOT_DIR)/lib/
+	@cp -dpRf $(GCC_LIB_DIR_ARMV8)/libgcc*.so* $(FAKEROOT_DIR)/lib/
+	@cp -dpRf $(CPP_LIB_DIR_ARMV8)/libstdc++.so* $(FAKEROOT_DIR)/usr/lib/
+else
+	@cp -dpRf $(shell find $(SYS_LIB_DIR_AARCH64)/ -name "*.so" | grep -v stdc++) $(FAKEROOT_DIR)/lib/
+	@cp -dpRf $(shell find $(SYS_LIB_DIR_AARCH64)/ -name "*.so.*" | grep -v stdc++) $(FAKEROOT_DIR)/lib/
+	@cp -dpRf $(GCC_LIB_DIR_AARCH64)/libgcc*.so* $(FAKEROOT_DIR)/lib/
+	@cp -dpRf $(CPP_LIB_DIR_AARCH64)/libstdc++.so* $(FAKEROOT_DIR)/usr/lib/
+endif
 endif
 	@find $(FAKEROOT_DIR) -name "libgcc_s.so" | xargs rm -f
 	@find $(FAKEROOT_DIR) -name "libstdc++.so.*.py" | xargs rm -f
@@ -54,10 +95,16 @@ endif
 	@echo "export SYS_BOARD_BSP=$(AMB_BOARD)" >> $(FAKEROOT_DIR)/etc/ambarella.conf
 	@echo "export SYS_BOARD_VERSION=$(BOARD_VERSION_STR)" >> $(FAKEROOT_DIR)/etc/ambarella.conf
 	@chmod 644 $(FAKEROOT_DIR)/etc/ambarella.conf
-ifneq ($(BUIDL_AMBARELLA_APP_DEBUG_SANITIZE_ADDRESS), y)
+ifneq ($(BUILD_AMBARELLA_APP_DEBUG_SANITIZE_ADDRESS), y)
 	@rm -rf $(FAKEROOT_DIR)/lib/libubsan.*
 	@rm -rf $(FAKEROOT_DIR)/lib/libasan.*
 endif
+ifneq ($(BUILD_AMBARELLA_APP_DEBUG_SANITIZE_LEAK), y)
+	@rm -rf $(FAKEROOT_DIR)/lib/liblsan.*
+endif
+ifneq ($(BUILD_AMBARELLA_APP_DEBUG_SANITIZE_THREAD), y)
+	@rm -rf $(FAKEROOT_DIR)/lib/libtsan.*
+endif
 	@echo "Prepare BasicFS Done"
 
 $(call add-target-into-build, basic_fs)
@@ -112,6 +159,11 @@ configure_inittab: basic_fs add_board_rootfs
 		echo "# Put a getty on the serial port 1" >> $(FAKEROOT_DIR)/etc/inittab; \
 		echo "ttyS1::respawn:/sbin/getty -L ttyS1 115200 vt100" >> $(FAKEROOT_DIR)/etc/inittab; \
 	fi
+	@if [ "$(CONFIG_AMBARELLA_SERIAL_PORT2_GETTY)" = "y" ]; then \
+		echo "" >> $(FAKEROOT_DIR)/etc/inittab; \
+		echo "# Put a getty on the serial port 2" >> $(FAKEROOT_DIR)/etc/inittab; \
+		echo "ttyS2::respawn:/sbin/getty -L ttyS2 115200 vt100" >> $(FAKEROOT_DIR)/etc/inittab; \
+	fi
 	@if [ "$(CONFIG_AMBARELLA_ASKFIRST_CONSOLE)" = "y" ]; then \
 		echo "::askfirst:-/bin/sh" >> $(FAKEROOT_DIR)/etc/inittab; \
 	fi
@@ -217,6 +269,18 @@ $(call add-target-into-build, configure_profile)
 configure_network: add_board_rootfs
 	@NETCONF=$(FAKEROOT_DIR)/etc/network/interfaces; \
 	cp -dpRf $(PRE_BUSYBOX_DIR)/etc/network/interfaces $(FAKEROOT_DIR)/etc/network/interfaces; \
+	if [ "$(CONFIG_AMBARELLA_USB0)" = "y" ]; then \
+		echo "" >> $$NETCONF; \
+		echo "auto usb0" >> $$NETCONF; \
+		if [ -n "$(CONFIG_AMBARELLA_USB0_ADDRESS)" -a -n "$(CONFIG_AMBARELLA_USB0_IP_MASK)" ]; then \
+			echo "iface usb0 inet static" >> $$NETCONF; \
+			echo "address $(CONFIG_AMBARELLA_USB0_ADDRESS)" >> $$NETCONF; \
+			echo "netmask $(CONFIG_AMBARELLA_USB0_IP_MASK)" >> $$NETCONF; \
+			if [ -n $(CONFIG_AMBARELLA_USB0_GW_ADDRESS) ]; then \
+				echo "gateway $(CONFIG_AMBARELLA_USB0_GW_ADDRESS)" >> $$NETCONF; \
+			fi \
+		fi \
+	fi; \
 	if [ "$(CONFIG_AMBARELLA_ETH0)" = "y" ]; then \
 		echo "" >> $$NETCONF; \
 		echo "auto eth0" >> $$NETCONF; \
@@ -249,8 +313,11 @@ configure_network: add_board_rootfs
 			fi \
 		fi \
 	fi; \
-	if [ "$(CONFIG_AMBARELLA_ETH0)" != "y" -a "$(CONFIG_AMBARELLA_ETH1)" != "y" -o "$(CONFIG_AMBARELLA_NETWORKMANAGER_SUPPORT)" = "y" ]; then \
+	if [ "$(CONFIG_AMBARELLA_ETH0)" != "y" -a "$(CONFIG_AMBARELLA_ETH1)" != "y" -o "$(CONFIG_AMBARELLA_NETWORKMANAGER_SUPPORT)" = "y" -o "$(CONFIG_AMBARELLA_CONNMAN_SUPPORT)" = "y" ]; then \
 		rm -rf $(FAKEROOT_DIR)/etc/init.d/S40network; \
+		if [ "$(CONFIG_AMBARELLA_CONNMAN_SUPPORT)" = "y" ]; then \
+			rm -rf $(FAKEROOT_DIR)/etc/network; \
+		fi \
 	fi
 	@echo "Configure network Done"
 
@@ -267,6 +334,7 @@ ifeq ($(CONFIG_AMBARELLA_INIT_SYSTEMD), y)
 add_board_rootfs: basic_fs prebuild_systemd
 endif
 ifeq ($(CONFIG_AMBARELLA_INIT_LINUXRC_FASTBOOT), y)
+add_board_rootfs: prebuild_udev
 ifeq ($(BUILD_AMBARELLA_PRIVATE_MODULES), y)
 add_board_rootfs: prebuild_firmware
 endif
@@ -283,17 +351,35 @@ endif
 ifeq ($(CONFIG_AMBARELLA_PULSEAUDIO_SUPPORT), y)
 add_board_rootfs: prebuild_pulseaudio
 endif
-ifeq ($(CONFIG_BSP_BOARD_S2LM_IRONCAR), y)
-add_board_rootfs: audio_svc video_svc media_svc event_svc img_svc sys_svc
+
+ifeq ($(BUILD_AMBARELLA_ORYX_MW), y)
+ifeq ($(BUILD_AMBARELLA_ORYX_SERVICE_AUDIO), y)
+add_board_rootfs: audio_svc
+endif
+ifeq ($(BUILD_AMBARELLA_ORYX_SERVICE_VIDEO), y)
+add_board_rootfs: video_svc
+endif
+ifeq ($(BUILD_AMBARELLA_ORYX_SERVICE_MEDIA), y)
+add_board_rootfs: media_svc
+endif
+ifeq ($(BUILD_AMBARELLA_ORYX_SERVICE_EVENT), y)
+add_board_rootfs: event_svc
+endif
+ifeq ($(BUILD_AMBARELLA_ORYX_SERVICE_IMAGE), y)
+add_board_rootfs: img_svc
+endif
+ifeq ($(BUILD_AMBARELLA_ORYX_SERVICE_SYSTEM), y)
+add_board_rootfs: sys_svc
 endif
-ifeq ($(CONFIG_BSP_BOARD_S2LM_KAR), y)
-add_board_rootfs: audio_svc video_svc media_svc event_svc img_svc sys_svc
 endif
 
 add_board_rootfs:
 	@cp -dpRf $(BOARD_ROOTFS_DIR)/* $(FAKEROOT_DIR)/ && chmod +x $(FAKEROOT_DIR)/etc/init.d/S*
+	@find $(FAKEROOT_DIR) -name ".gitignore" -delete
 ifeq ($(CONFIG_AMBARELLA_PULSEAUDIO_SUPPORT), y)
-	@chmod 644 $(FAKEROOT_DIR)/etc/pulse/*.conf
+	@[ -e $(FAKEROOT_DIR)/etc/pulse ] && chmod 644 $(FAKEROOT_DIR)/etc/pulse/*
+	@[ -e $(FAKEROOT_DIR)/usr/share/pulseaudio ] && find $(FAKEROOT_DIR)/usr/share/pulseaudio -name "*.conf" | xargs chmod 644
+	@echo "tmpfs              /var/lib/pulse  tmpfs      defaults                0      0" >> $(FAKEROOT_DIR)/etc/fstab
 endif
 ifeq ($(CONFIG_AMBARELLA_INIT_SYSTEMD), y)
 	@rm -rf $(FAKEROOT_DIR)/etc/init.d/S*
@@ -301,7 +387,9 @@ ifeq ($(CONFIG_AMBARELLA_INIT_SYSTEMD), y)
 endif
 ifeq ($(CONFIG_AMBARELLA_INIT_LINUXRC), y)
 	@rm -rf $(FAKEROOT_DIR)/usr/lib/systemd
+	@rm -rf $(FAKEROOT_DIR)/usr/lib/tmpfiles.d
 	@rm -rf $(FAKEROOT_DIR)/etc/systemd
+	@rm -rf $(FAKEROOT_DIR)/etc/tmpfiles.d
 endif
 ifeq ($(CONFIG_AMBARELLA_INIT_LINUXRC_FASTBOOT), y)
 	@rm -rf $(FAKEROOT_DIR)/usr/lib/systemd
@@ -314,11 +402,13 @@ ifeq ($(CONFIG_AMBARELLA_INIT_LINUXRC_FASTBOOT), y)
 	@cp -rf $(AMB_TOPDIR)/prebuild/third-party/$(AMBARELLA_CPU_ARCH)/libg7xx/usr/lib/libg7xx.* $(FAKEROOT_DIR)/usr/lib/
 ifeq ($(BUILD_AMBARELLA_PRIVATE_MODULES), y)
 ifeq ($(AMBOOT_BOOT_DSP), y)
+ifneq ($(AMBOOT_DSP_LOG_CAPTURE), y)
 	@rm -f $(FAKEROOT_DIR)/lib/firmware/default_binary.bin
 	@rm -f $(FAKEROOT_DIR)/lib/firmware/orccode.bin
 	@rm -f $(FAKEROOT_DIR)/lib/firmware/orcme.bin
 endif
 endif
+endif
 ifeq ($(BUILD_AMBARELLA_UNIT_TESTS_IAV), y)
 	@rm -f $(FAKEROOT_DIR)/data/font_index.bin
 	@rm -f $(FAKEROOT_DIR)/data/font_map.bin
@@ -326,6 +416,7 @@ ifeq ($(BUILD_AMBARELLA_UNIT_TESTS_IAV), y)
 endif
 	@echo "export IDSP_RAM_START=$(IDSP_RAM_START)" >> $(FAKEROOT_DIR)/etc/ambarella.conf
 	@echo "export DSP_BSB_SIZE=$(DSP_BSB_SIZE)" >> $(FAKEROOT_DIR)/etc/ambarella.conf
+
 ifeq ($(CONFIG_S2LMKIWI_SENSOR_OV9710), y)
 	@echo "export SYS_BOARD_SENSOR=ov9710" >> $(FAKEROOT_DIR)/etc/ambarella.conf
 else ifeq ($(CONFIG_S2LMKIWI_SENSOR_AR0230), y)
@@ -336,6 +427,22 @@ else ifeq ($(CONFIG_S2LMKIWI_SENSOR_AR0230_HDR_2X), y)
 	@echo "export SYS_BOARD_SENSOR=ar0230_hdr_2x" >> $(FAKEROOT_DIR)/etc/ambarella.conf
 else ifeq ($(CONFIG_S2LMKIWI_SENSOR_OV4689), y)
 	@echo "export SYS_BOARD_SENSOR=ov4689" >> $(FAKEROOT_DIR)/etc/ambarella.conf
+else ifeq ($(CONFIG_S2LMKIWI_SENSOR_IMX322), y)
+	@echo "export SYS_BOARD_SENSOR=imx322" >> $(FAKEROOT_DIR)/etc/ambarella.conf
+else ifeq ($(CONFIG_S2LMKIWI_SENSOR_OV2732_MIPI), y)
+	@echo "export SYS_BOARD_SENSOR=ov2732_mipi" >> $(FAKEROOT_DIR)/etc/ambarella.conf
+else ifeq ($(CONFIG_MANGO_SENSOR_OV4689), y)
+	@echo "export SYS_BOARD_SENSOR=ov4689" >> $(FAKEROOT_DIR)/etc/ambarella.conf
+else ifeq ($(CONFIG_MANGO_SENSOR_IMX322), y)
+	@echo "export SYS_BOARD_SENSOR=imx322" >> $(FAKEROOT_DIR)/etc/ambarella.conf
+else ifeq ($(CONFIG_OLIVE_SENSOR_OV4689), y)
+	@echo "export SYS_BOARD_SENSOR=ov4689" >> $(FAKEROOT_DIR)/etc/ambarella.conf
+else ifeq ($(CONFIG_OLIVE_SENSOR_IMX322), y)
+	@echo "export SYS_BOARD_SENSOR=imx322" >> $(FAKEROOT_DIR)/etc/ambarella.conf
+else ifeq ($(CONFIG_OLIVE_SENSOR_OS05A10), y)
+	@echo "export SYS_BOARD_SENSOR=os05a10" >> $(FAKEROOT_DIR)/etc/ambarella.conf
+else ifeq ($(CONFIG_ELEKTRAS_SENSOR_IMX322), y)
+	@echo "export SYS_BOARD_SENSOR=imx322" >> $(FAKEROOT_DIR)/etc/ambarella.conf
 else ifeq ($(CONFIG_BOARD_VERSION_S2LMELEKTRA_OV4689_S2L22M), y)
 	@echo "export SYS_BOARD_SENSOR=ov4689" >> $(FAKEROOT_DIR)/etc/ambarella.conf
 else ifeq ($(CONFIG_BOARD_VERSION_S2LMELEKTRA_OV4689_S2L55M), y)
@@ -344,6 +451,18 @@ else ifeq ($(CONFIG_BOARD_VERSION_S2LMELEKTRA_IMX322_S2L22M), y)
 	@echo "export SYS_BOARD_SENSOR=imx322" >> $(FAKEROOT_DIR)/etc/ambarella.conf
 else ifeq ($(CONFIG_BOARD_VERSION_S2LMELEKTRA_IMX322_S2L55M), y)
 	@echo "export SYS_BOARD_SENSOR=imx322" >> $(FAKEROOT_DIR)/etc/ambarella.conf
+else ifeq ($(CONFIG_STRAWBERRY_SENSOR_OV4689), y)
+	@echo "export SYS_BOARD_SENSOR=ov4689" >> $(FAKEROOT_DIR)/etc/ambarella.conf
+else ifeq ($(CONFIG_STRAWBERRY_SENSOR_IMX307), y)
+	@echo "export SYS_BOARD_SENSOR=imx307" >> $(FAKEROOT_DIR)/etc/ambarella.conf
+else ifeq ($(CONFIG_S5LM_TOMATO_SENSOR_OV4689), y)
+	@echo "export SYS_BOARD_SENSOR=ov4689" >> $(FAKEROOT_DIR)/etc/ambarella.conf
+else ifeq ($(CONFIG_S5LM_TOMATO_SENSOR_IMX307), y)
+	@echo "export SYS_BOARD_SENSOR=imx307" >> $(FAKEROOT_DIR)/etc/ambarella.conf
+else ifeq ($(CONFIG_ELEKTRA_V_SENSOR_IMX307), y)
+	@echo "export SYS_BOARD_SENSOR=imx307" >> $(FAKEROOT_DIR)/etc/ambarella.conf
+else ifeq ($(CONFIG_ELEKTRA_V_SENSOR_IMX322), y)
+	@echo "export SYS_BOARD_SENSOR=imx322" >> $(FAKEROOT_DIR)/etc/ambarella.conf
 endif
 ifeq ($(CONFIG_S2LMIRONMAN_FASTBOOT_CES_DEMO), y)
 	@echo "export FASTBOOT_CES_DEMO=y" >> $(FAKEROOT_DIR)/etc/ambarella.conf
@@ -358,6 +477,7 @@ endif
 ifeq ($(CONFIG_S2LMELEKTRA_ENABLE_ADVANCED_ISO_MODE), y)
 	@echo "export S2LMELEKTRA_ENABLE_ADVANCED_ISO_MODE=1" >> $(FAKEROOT_DIR)/etc/ambarella.conf
 endif
+
 endif
 ifneq ($(BUILD_AMBARELLA_ORYX_MW), y)
 	@rm -rf $(FAKEROOT_DIR)/etc/oryx
@@ -486,6 +606,12 @@ MTD_PEBSIZE		:= 0x0040
 UBI_LEBSIZE		:= 0x3ff80
 UBI_SUBPAGESIZE		:= 0x0001
 endif
+ifeq ($(CONFIG_SPINAND_P2K_E128K), y)
+MTD_PAGESIZE		:= 0x00800
+MTD_PEBSIZE		:= 0x20000
+UBI_LEBSIZE		:= 0x1F000
+UBI_SUBPAGESIZE		:= 0x0800
+endif
 
 # Build Image
 
@@ -516,6 +642,28 @@ build_fsimage_common: $(DOT_CONFIG)
 	@find $(FAKEROOT_DIR) -type d | xargs chmod 755
 	@find $(FAKEROOT_DIR) -type f -name *.so | xargs chmod 755
 	@find $(FAKEROOT_DIR) -type f -name *.so.* | xargs chmod 755
+	@for l in `find $(FAKEROOT_DIR)/usr/lib -type l -name "lib*.so*" | sort`; do \
+		if readlink -e $${l} > /dev/null; then \
+			lname=`basename $${l}`; \
+			lsoname=`$(CROSS_COMPILE)objdump -p $${l} | grep SONAME | awk '{print $$2}'`; \
+			if [ x"$${lsoname}" != x -a "$${lname}" != "$${lsoname}" ]; then \
+				rm -rf $${l}; \
+			fi; \
+		else \
+			rm -rf $${l}; \
+		fi; \
+	done
+	@for l in `find $(FAKEROOT_DIR)/lib -type l -name "lib*.so*" | sort`; do \
+		if readlink -e $${l} > /dev/null; then \
+			lname=`basename $${l}`; \
+			lsoname=`$(CROSS_COMPILE)objdump -p $${l} | grep SONAME | awk '{print $$2}'`; \
+			if [ x"$${lsoname}" != x -a "$${lname}" != "$${lsoname}" ]; then \
+				rm -rf $${l}; \
+			fi; \
+		else \
+			rm -rf $${l}; \
+		fi; \
+	done
 ifneq ($(BUILD_AMBARELLA_APP_DEBUG), y)
 	@find $(FAKEROOT_DIR) -type f -executable -exec sh -c "file -i '{}' | grep -q 'x-sharedlib; charset=binary'" \; -print | xargs $(CROSS_COMPILE)strip -s
 	@find $(FAKEROOT_DIR) -type f -executable -exec sh -c "file -i '{}' | grep -q 'x-executable; charset=binary'" \; -print | grep -v gdb | xargs $(CROSS_COMPILE)strip -s
@@ -552,7 +700,20 @@ build_squashfs: build_fsimage_common
 ifeq ($(CONFIG_AMBARELLA_ADD_PARTITION), y)
 	@echo "cp -dpRf $(ROOTFS_DIR)/ubicfg_fastboot.ini $(ROOTFS_OUT_DIR)/ubicfg_fastboot.ini " \
 		>> $(ROOTFS_OUT_DIR)/_fakeroot.sh
-	@echo "$(MKUBIFS) -r $(FAKEROOT_DIR)/tmp/ \
+	@mkdir -p $(FAKEROOT_DIR)/tmp/config
+	@touch $(FAKEROOT_DIR)/tmp/config/resolv.conf
+	@rm -fr $(FAKEROOT_DIR)/etc/resolv.conf
+	@ln -s /tmp/config/resolv.conf $(FAKEROOT_DIR)/etc/resolv.conf
+	@echo "CST-8" > $(FAKEROOT_DIR)/tmp/config/TZ
+	@rm -fr $(FAKEROOT_DIR)/etc/TZ
+	@ln -s /tmp/config/TZ $(FAKEROOT_DIR)/etc/TZ
+
+	@mkdir -p $(FAKEROOT_DIR)/tmp/config/calibration
+	@mkdir -p $(FAKEROOT_DIR)/ambarella
+	@rm -rf $(FAKEROOT_DIR)/ambarella/calibration
+	@ln -s /tmp/config/calibration $(FAKEROOT_DIR)/ambarella/calibration
+
+	@echo "$(MKUBIFS) -r $(FAKEROOT_DIR)/tmp/config \
 		-m $(MTD_PAGESIZE) -e $(UBI_LEBSIZE) -c 2047 $(UBIFSOUTFLAG) $(ROOTFS_OUT_DIR)/ubifs_fastboot.img" \
 		>> $(ROOTFS_OUT_DIR)/_fakeroot.sh
 	@echo "$(UBINIZE) -o $(ROOTFS_OUT_DIR)/ubifs \
@@ -650,12 +811,20 @@ ifeq ($(CONFIG_BOOT_MEDIA_NAND), y)
 	else \
 		mv $(ROOTFS_OUT_DIR)/rootfs.cpio $(ROOTFS_OUT_DIR)/rootfs.cpio.gz; \
 	fi
-	@$(MAKE) $(AMBA_MAKE_PARA) -C $(LINUX_SRC_DIR) O=$(LINUX_OUT_DIR) \
+	@$(MAKE) $(AMBA_MAKE_PARA) ARCH=$(CPU_ARCH) -C $(LINUX_SRC_DIR) O=$(LINUX_OUT_DIR) \
 		CONFIG_INITRAMFS_SOURCE="$(ROOTFS_OUT_DIR)/rootfs.cpio.gz" \
 		CONFIG_INITRAMFS_ROOT_UID=0 CONFIG_INITRAMFS_ROOT_GID=0 all
 endif
-	@cp -dpRf $(LINUX_OUT_DIR)/arch/arm/boot/zImage $(KERNEL_OUT_DIR)/zImage
-	@cp -dpRf $(LINUX_OUT_DIR)/arch/arm/boot/Image $(KERNEL_OUT_DIR)/Image
+ifeq ($(CONFIG_CPU_CORTEXA53), y)
+ifeq ($(CONFIG_ARMV8_AARCH32), y)
+	@cp -dpRf $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/zImage $(KERNEL_OUT_DIR)/zImage
+else
+	@cp -dpRf $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/Image.gz $(KERNEL_OUT_DIR)/zImage
+endif
+else
+	@cp -dpRf $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/zImage $(KERNEL_OUT_DIR)/zImage
+endif
+	@cp -dpRf $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/Image $(KERNEL_OUT_DIR)/Image
 
 build_fsimage: build_cpio
 endif
@@ -765,13 +934,39 @@ ifeq ($(CONFIG_BACKUP_CPIO),y)
 
 build_backup_cpio:
 	@echo "Build backup cpio"
+	@mkdir -p $(ROOTFS_OUT_DIR)
 	@rm -f $(ROOTFS_OUT_DIR)/backup_cpio.sh $(ROOTFS_OUT_DIR)/backup_cpio.gz && touch $(ROOTFS_OUT_DIR)/backup_cpio.sh
+ifeq ($(CONFIG_CPU_CORTEXA53), y)
+ifeq ($(CONFIG_ARMV8_AARCH32), y)
 	@echo "tar Jxf $(ROOTFS_DIR)/mini_fake.tar.xz -C $(ROOTFS_OUT_DIR)" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh
-	@echo "cp -dp $(PRE_BUSYBOX_DIR)/usr/share/udhcpc/default.script $(ROOTFS_OUT_DIR)/mini_fake/usr/share/udhcpc/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh
-	@echo "cp -dp $(ORYX_BIN_DIR)/pba_upgrade $(ROOTFS_OUT_DIR)/mini_fake/usr/bin/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh
-	@echo "cp -dp $(FAKEROOT_DIR)/usr/local/bin/upgrade_partition $(ROOTFS_OUT_DIR)/mini_fake/usr/sbin/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh
-	@echo "cp -dpRf $(FAKEROOT_DIR)/usr/lib/libssl.so* $(ROOTFS_OUT_DIR)/mini_fake/lib/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh
-	@echo "cp -dpRf $(FAKEROOT_DIR)/usr/lib/libcrypto.so* $(ROOTFS_OUT_DIR)/mini_fake/lib/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh
+else
+	@echo "tar Jxf $(ROOTFS_DIR)/mini_fake_s5.tar.xz -C $(ROOTFS_OUT_DIR)" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh
+endif
+else
+	@echo "tar Jxf $(ROOTFS_DIR)/mini_fake.tar.xz -C $(ROOTFS_OUT_DIR)" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh
+endif
+	@if [ -e $(PRE_BUSYBOX_DIR)/usr/share/udhcpc/default.script ];then \
+		echo "cp -dp $(PRE_BUSYBOX_DIR)/usr/share/udhcpc/default.script $(ROOTFS_OUT_DIR)/mini_fake/usr/share/udhcpc/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh; \
+	fi
+	@if [ -e $(ORYX_BIN_DIR)/pba_upgrade ];then \
+		echo "cp -dp $(ORYX_BIN_DIR)/pba_upgrade $(ROOTFS_OUT_DIR)/mini_fake/usr/bin/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh; \
+		echo "cp -dpRf $(FAKEROOT_DIR)/usr/lib/libstdc++.so* $(ROOTFS_OUT_DIR)/mini_fake/lib/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh; \
+		echo "cp -dpRf $(FAKEROOT_DIR)/usr/lib/libamconfig.so* $(ROOTFS_OUT_DIR)/mini_fake/lib/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh; \
+		echo "cp -dpRf $(FAKEROOT_DIR)/usr/lib/libamosal.so* $(ROOTFS_OUT_DIR)/mini_fake/lib/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh; \
+		echo "cp -dpRf $(FAKEROOT_DIR)/usr/lib/libamutil.so* $(ROOTFS_OUT_DIR)/mini_fake/lib/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh; \
+		echo "cp -dpRf $(FAKEROOT_DIR)/usr/lib/libamdec7z.so* $(ROOTFS_OUT_DIR)/mini_fake/lib/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh; \
+		echo "cp -dpRf $(FAKEROOT_DIR)/usr/lib/lib7zDec.so* $(ROOTFS_OUT_DIR)/mini_fake/lib/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh; \
+		echo "cp -dpRf $(FAKEROOT_DIR)/usr/lib/libarchive.so* $(ROOTFS_OUT_DIR)/mini_fake/lib/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh; \
+		echo "cp -dpRf $(FAKEROOT_DIR)/usr/lib/libamarchive.so* $(ROOTFS_OUT_DIR)/mini_fake/lib/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh; \
+		echo "cp -dpRf $(FAKEROOT_DIR)/usr/lib/liblua* $(ROOTFS_OUT_DIR)/mini_fake/lib/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh; \
+		echo "cp -dpRf $(FAKEROOT_DIR)/usr/lib/liblzma.so* $(ROOTFS_OUT_DIR)/mini_fake/lib/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh; \
+		echo "cp -dpRf $(FAKEROOT_DIR)/usr/lib/libz.so* $(ROOTFS_OUT_DIR)/mini_fake/lib/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh; \
+		echo "cp -dpRf $(FAKEROOT_DIR)/usr/lib/libbz2.so* $(ROOTFS_OUT_DIR)/mini_fake/lib/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh; \
+	fi
+	@echo "find $(ROOTFS_OUT_DIR)/mini_fake/lib/ -type f -executable -exec sh -c \"file -i '{}' | grep -q 'x-sharedlib; charset=binary'\" \; -print | xargs $(CROSS_COMPILE)strip -s">> $(ROOTFS_OUT_DIR)/backup_cpio.sh
+	@if [ -e $(FAKEROOT_DIR)/usr/local/bin/upgrade_partition ];then \
+		echo "cp -dp $(FAKEROOT_DIR)/usr/local/bin/upgrade_partition $(ROOTFS_OUT_DIR)/mini_fake/usr/sbin/" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh; \
+	fi
 	@echo "chown -R 0:0 $(ROOTFS_OUT_DIR)/mini_fake" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh
 	@echo "$(MAKEDEVS) -d $(ROOTFS_DIR)/initramfs_table.txt $(ROOTFS_OUT_DIR)/mini_fake" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh
 	@echo "cd $(ROOTFS_OUT_DIR)/mini_fake && find . | cpio --quiet -o -H newc > $(ROOTFS_OUT_DIR)/backup.cpio" >> $(ROOTFS_OUT_DIR)/backup_cpio.sh
@@ -779,15 +974,38 @@ build_backup_cpio:
 	@chmod u+x $(ROOTFS_OUT_DIR)/backup_cpio.sh
 	@cd $(ROOTFS_OUT_DIR); fakeroot -- $(ROOTFS_OUT_DIR)/backup_cpio.sh
 	@if [ -e $(KERNEL_OUT_DIR)/pba_zImage ];then rm -rf $(KERNEL_OUT_DIR)/pba_zImage; fi
-	@mv $(LINUX_OUT_DIR)/arch/arm/boot/Image $(LINUX_OUT_DIR)/arch/arm/boot/Image_ori
-	@mv $(LINUX_OUT_DIR)/arch/arm/boot/zImage $(LINUX_OUT_DIR)/arch/arm/boot/zImage_ori
-	@$(MAKE) -C $(LINUX_SRC_DIR) O=$(LINUX_OUT_DIR) \
+	@mv $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/Image $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/Image_ori
+ifeq ($(CONFIG_CPU_CORTEXA53), y)
+ifeq ($(CONFIG_ARMV8_AARCH32), y)
+	@mv $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/zImage $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/zImage_ori
+else
+	@mv $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/Image.gz $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/zImage_ori
+endif
+else
+	@mv $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/zImage $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/zImage_ori
+endif
+	@echo $(LINUX_SRC_DIR)
+	@$(MAKE) $(AMBA_MAKE_PARA) ARCH=$(CPU_ARCH) -C $(LINUX_SRC_DIR) O=$(LINUX_OUT_DIR) \
 			CONFIG_INITRAMFS_SOURCE="$(ROOTFS_OUT_DIR)/backup.cpio.gz" \
 			CONFIG_INITRAMFS_ROOT_UID=0 CONFIG_INITRAMFS_ROOT_GID=0 \
-			CONFIG_MMC=y CONFIG_MMC_AMBARELLA=y CONFIG_MMC_BLOCK=y all
-	@cp -dpRf $(LINUX_OUT_DIR)/arch/arm/boot/zImage $(KERNEL_OUT_DIR)/pba_zImage
-	@mv $(LINUX_OUT_DIR)/arch/arm/boot/Image_ori $(LINUX_OUT_DIR)/arch/arm/boot/Image
-	@mv $(LINUX_OUT_DIR)/arch/arm/boot/zImage_ori $(LINUX_OUT_DIR)/arch/arm/boot/zImage
+			CONFIG_MMC=y CONFIG_MMC_AMBARELLA=y CONFIG_MMC_BLOCK=y \
+			CONFIG_FUSE_FS=y CONFIG_FAT_FS=y CONFIG_VFAT_FS=y \
+			CONFIG_FAT_DEFAULT_CODEPAGE=437 \
+			CONFIG_FAT_DEFAULT_IOCHARSET="iso8859-1" all
+ifeq ($(CONFIG_CPU_CORTEXA53), y)
+ifeq ($(CONFIG_ARMV8_AARCH32), y)
+	@cp -dpRf $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/zImage $(KERNEL_OUT_DIR)/pba_zImage
+	@mv $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/zImage_ori $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/zImage
+else
+	@cp -dpRf $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/Image $(KERNEL_OUT_DIR)/pba_zImage
+	@mv $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/zImage_ori $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/Image.gz
+endif
+else
+	@cp -dpRf $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/zImage $(KERNEL_OUT_DIR)/pba_zImage
+	@mv $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/zImage_ori $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/zImage
+endif
+	@mv $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/Image_ori $(LINUX_OUT_DIR)/arch/$(ARM_ARCH)/boot/Image
+
 
 build_fsimage: build_backup_cpio
 endif
